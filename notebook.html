<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notebook App</title>
<style>
	body {
		margin: 0;
		font-family: Arial, sans-serif;
		background: #c1a273;
		overflow: hidden;
		user-select: none;
	}

	#notebook-container {
		position: relative;
		width: 100%;
		height: 100vh;
		display: flex;
	}

	.page {
		flex: 1;
		background: #c1a273;
		position: relative;
		overflow: hidden;
	}

	.folded-corner {
		width: 40px;
		height: 40px;
		background: #d0c0a0;
		position: absolute;
		right: 0;
		bottom: 0;
		clip-path: polygon(100% 0, 0 100%, 100% 100%);
		cursor: pointer;
		display: none;
	}

	.page:hover .folded-corner {
		display: block;
	}

	.text-box {
		position: absolute;
		background: #c1a273;
		color: #3d2c1e;
		padding: 5px;
		min-width: 100px;
		min-height: 60px;
		border: 2px solid transparent;
		resize: both;
		overflow: auto;
		font-size: 11px;
	}

	.text-box:focus {
		outline: none;
		border: 2px solid #5d4037;
		background: #f5e8c8;
	}

	.formatting-toolbar {
		position: absolute;
		background: #f5e8c8;
		border: 1px solid #a08c6e;
		height: 35px;
		display: flex;
		gap: 5px;
		padding: 2px 5px;
		display: none;
		z-index: 1000;
	}

	.formatting-toolbar button {
		width: 30px;
		cursor: pointer;
		background: #e0d0b0;
		border: none;
		color: #3d2c1e;
		font-weight: bold;
	}

	.formatting-toolbar select {
		width: 50px;
	}

	.image-box {
		position: absolute;
		cursor: move;
	}

	#sidebar {
		position: absolute;
		left: -200px;
		top: 0;
		width: 200px;
		height: 100%;
		background: #a08c6e;
		overflow-y: auto;
		transition: left 0.3s;
		padding: 10px;
		box-sizing: border-box;
	}

	#sidebar h3 {
		margin-top: 0;
		color: #3d2c1e;
	}

	#top-bar {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 35px;
		background: #f5e8c8;
		display: flex;
		align-items: center;
		padding: 0 10px;
		box-sizing: border-box;
	}

	#top-bar button {
		margin-right: 5px;
		cursor: pointer;
	}

</style>
</head>
<body>

<div id="notebook-container">
	<div class="page" id="left-page">
		<div class="folded-corner" onclick="turnPage()"></div>
	</div>
	<div class="page" id="right-page">
		<div class="folded-corner" onclick="turnPage()"></div>
	</div>
</div>

<div id="sidebar">
	<h3>Pages</h3>
	<div id="page-list">No pages yet</div>
</div>

<div id="top-bar">
	<button onclick="toggleSidebar()">â˜°</button>
	<button onclick="importImage()">Import Image</button>
	<button onclick="saveNotebook()">Save</button>
</div>

<div class="formatting-toolbar" id="formatting-toolbar">
	<button onclick="formatBold()">B</button>
	<button onclick="formatItalic()">I</button>
	<select id="font-size" onchange="changeFontSize(this.value)">
		<option value="8">8</option>
		<option value="10">10</option>
		<option value="11" selected>11</option>
		<option value="12">12</option>
		<option value="14">14</option>
		<option value="16">16</option>
		<option value="18">18</option>
		<option value="20">20</option>
		<option value="24">24</option>
	</select>
</div>

<script>
	let sidebarVisible = false;
	const leftPage = document.getElementById("left-page");
	const rightPage = document.getElementById("right-page");
	const formattingToolbar = document.getElementById("formatting-toolbar");
	let activeTextBox = null;

	function toggleSidebar() {
		const sidebar = document.getElementById("sidebar");
		if(sidebarVisible){
			sidebar.style.left = "-200px";
		}else{
			sidebar.style.left = "0";
		}
		sidebarVisible = !sidebarVisible;
	}

	// Page turn (simple toggle between left and right)
	function turnPage() {
		if(leftPage.style.display !== "none"){
			leftPage.style.display = "none";
			rightPage.style.display = "block";
		}else{
			leftPage.style.display = "block";
			rightPage.style.display = "block";
		}
	}

	// Double-click to create text box
	document.querySelectorAll(".page").forEach(page=>{
		page.addEventListener("dblclick", e=>{
			const box = document.createElement("div");
			box.className = "text-box";
			box.contentEditable = true;
			box.style.left = e.offsetX + "px";
			box.style.top = e.offsetY + "px";
			box.style.width = "200px";
			box.style.height = "100px";
			page.appendChild(box);
			makeDraggable(box);
			box.addEventListener("focus", ()=>{
				activeTextBox = box;
				showToolbar(box);
			});
			box.addEventListener("blur", ()=>{
				activeTextBox = null;
				formattingToolbar.style.display = "none";
			});
		});
	});

	function makeDraggable(el){
		let offsetX, offsetY, dragging=false;
		el.addEventListener("mousedown", e=>{
			if(e.target!==el) return;
			dragging=true;
			offsetX = e.offsetX;
			offsetY = e.offsetY;
		});
		document.addEventListener("mousemove", e=>{
			if(!dragging) return;
			el.style.left = e.clientX - offsetX + "px";
			el.style.top = e.clientY - offsetY + "px";
		});
		document.addEventListener("mouseup", e=>{
			dragging=false;
		});
	}

	function showToolbar(box){
		const rect = box.getBoundingClientRect();
		formattingToolbar.style.left = rect.left + "px";
		formattingToolbar.style.top = rect.top - 40 + "px";
		formattingToolbar.style.display = "flex";
	}

	// Formatting
	function formatBold(){
		if(activeTextBox){
			document.execCommand("bold");
		}
	}
	function formatItalic(){
		if(activeTextBox){
			document.execCommand("italic");
		}
	}
	function changeFontSize(size){
		if(activeTextBox){
			document.execCommand("fontSize", false, 7); // temp max size
			activeTextBox.style.fontSize = size+"px";
		}
	}

	// Drag and drop images
	document.querySelectorAll(".page").forEach(page=>{
		page.addEventListener("dragover", e=>e.preventDefault());
		page.addEventListener("drop", e=>{
			e.preventDefault();
			const files = e.dataTransfer.files;
			for(let file of files){
				if(!file.type.startsWith("image/")) continue;
				const img = document.createElement("img");
				img.src = URL.createObjectURL(file);
				img.className="image-box";
				img.style.left = e.offsetX + "px";
				img.style.top = e.offsetY + "px";
				img.style.width="150px";
				page.appendChild(img);
				makeDraggable(img);
			}
		});
	});

	// Import image via button
	function importImage(){
		const input = document.createElement("input");
		input.type="file";
		input.accept="image/*";
		input.onchange = e=>{
			const file = e.target.files[0];
			if(!file) return;
			const img = document.createElement("img");
			img.src = URL.createObjectURL(file);
			img.className="image-box";
			img.style.left="100px";
			img.style.top="100px";
			leftPage.appendChild(img);
			makeDraggable(img);
		}
		input.click();
	}

	function saveNotebook(){
		alert("Save functionality not implemented in this prototype.");
	}
</script>

</body>
</html>
